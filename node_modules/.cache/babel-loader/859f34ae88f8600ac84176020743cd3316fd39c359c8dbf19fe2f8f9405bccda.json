{"ast":null,"code":"// src/TechnicalAnalysis.ts\nexport class TechnicalAnalysis{// RSI (Relative Strength Index)\nstatic calculateRSI(prices){let period=arguments.length>1&&arguments[1]!==undefined?arguments[1]:14;if(prices.length<period+1){return new Array(prices.length).fill(50);}const gains=[];const losses=[];// Calculate price changes\nfor(let i=1;i<prices.length;i++){const change=prices[i].close-prices[i-1].close;gains.push(Math.max(change,0));losses.push(Math.max(-change,0));}const rsi=[];// Calculate initial average gain and loss\nlet avgGain=gains.slice(0,period).reduce((sum,gain)=>sum+gain,0)/period;let avgLoss=losses.slice(0,period).reduce((sum,loss)=>sum+loss,0)/period;// Calculate RSI for the first period\nconst rs=avgGain/avgLoss;rsi.push(100-100/(1+rs));// Calculate RSI for remaining periods using smoothing\nfor(let i=period;i<gains.length;i++){avgGain=(avgGain*(period-1)+gains[i])/period;avgLoss=(avgLoss*(period-1)+losses[i])/period;const rs=avgGain/avgLoss;rsi.push(100-100/(1+rs));}// Pad the beginning with the first RSI value\nreturn new Array(period).fill(rsi[0]).concat(rsi);}// MACD (Moving Average Convergence Divergence)\nstatic calculateMACD(prices){let fastPeriod=arguments.length>1&&arguments[1]!==undefined?arguments[1]:12;let slowPeriod=arguments.length>2&&arguments[2]!==undefined?arguments[2]:26;let signalPeriod=arguments.length>3&&arguments[3]!==undefined?arguments[3]:9;const closes=prices.map(p=>p.close);const ema12=this.calculateEMA(closes,fastPeriod);const ema26=this.calculateEMA(closes,slowPeriod);const macd=ema12.map((fast,i)=>fast-ema26[i]);const signal=this.calculateEMA(macd,signalPeriod);const histogram=macd.map((macdVal,i)=>macdVal-signal[i]);return{macd,signal,histogram};}// Bollinger Bands\nstatic calculateBollingerBands(prices){let period=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;let stdDev=arguments.length>2&&arguments[2]!==undefined?arguments[2]:2;const closes=prices.map(p=>p.close);const sma=this.calculateSMA(closes,period);const upper=[];const lower=[];for(let i=0;i<closes.length;i++){if(i<period-1){upper.push(closes[i]);lower.push(closes[i]);continue;}const slice=closes.slice(i-period+1,i+1);const mean=slice.reduce((sum,price)=>sum+price,0)/period;const variance=slice.reduce((sum,price)=>sum+Math.pow(price-mean,2),0)/period;const standardDeviation=Math.sqrt(variance);upper.push(mean+stdDev*standardDeviation);lower.push(mean-stdDev*standardDeviation);}return{upper,middle:sma,lower};}// Moving Averages\nstatic calculateSMA(prices,period){const sma=[];for(let i=0;i<prices.length;i++){if(i<period-1){sma.push(prices[i]);continue;}const sum=prices.slice(i-period+1,i+1).reduce((acc,price)=>acc+price,0);sma.push(sum/period);}return sma;}static calculateEMA(prices,period){const ema=[];const multiplier=2/(period+1);// Initialize with SMA\nif(prices.length>=period){const initialSMA=prices.slice(0,period).reduce((sum,price)=>sum+price,0)/period;ema.push(initialSMA);for(let i=1;i<prices.length;i++){const newEMA=prices[i]*multiplier+ema[i-1]*(1-multiplier);ema.push(newEMA);}}else{// If not enough data, use the price itself\nreturn prices.map(p=>p);}return ema;}// Volume Analysis\nstatic calculateVolumeMetrics(prices){let period=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;const volumes=prices.map(p=>p.volume);const volumeSMA=this.calculateSMA(volumes,period);const volumeRatio=volumes.map((volume,i)=>{if(i<period-1)return 1;return volume/volumeSMA[i];});return{volumeSMA,volumeRatio};}// Support and Resistance\nstatic calculateSupportResistance(prices){let window=arguments.length>1&&arguments[1]!==undefined?arguments[1]:20;const highs=prices.map(p=>p.high);const lows=prices.map(p=>p.low);const support=[];const resistance=[];for(let i=0;i<prices.length;i++){if(i<window){support.push(lows[i]);resistance.push(highs[i]);continue;}const lowWindow=lows.slice(i-window,i+1);const highWindow=highs.slice(i-window,i+1);const minLow=Math.min(...lowWindow);const maxHigh=Math.max(...highWindow);support.push(minLow);resistance.push(maxHigh);}return{support,resistance};}// Calculate all technical indicators\nstatic calculateAllIndicators(prices){return{rsi:this.calculateRSI(prices),macd:this.calculateMACD(prices),bollingerBands:this.calculateBollingerBands(prices),movingAverages:{sma20:this.calculateSMA(prices.map(p=>p.close),20),sma50:this.calculateSMA(prices.map(p=>p.close),50),ema12:this.calculateEMA(prices.map(p=>p.close),12),ema26:this.calculateEMA(prices.map(p=>p.close),26)},volume:this.calculateVolumeMetrics(prices),supportResistance:this.calculateSupportResistance(prices)};}// Buy/Sell Recommendation Logic\nstatic generateRecommendations(prices,indicators,fundamentals,currentPrice){const signals={bullish:[],bearish:[],neutral:[]};let technicalScore=0;let fundamentalScore=0;let riskScore=0;// Technical Analysis\nconst currentRSI=indicators.rsi[indicators.rsi.length-1];const currentMACD=indicators.macd.macd[indicators.macd.macd.length-1];const currentSignal=indicators.macd.signal[indicators.macd.signal.length-1];const currentHistogram=indicators.macd.histogram[indicators.macd.histogram.length-1];const currentBBUpper=indicators.bollingerBands.upper[indicators.bollingerBands.upper.length-1];const currentBBLower=indicators.bollingerBands.lower[indicators.bollingerBands.lower.length-1];const currentSMA20=indicators.movingAverages.sma20[indicators.movingAverages.sma20.length-1];const currentSMA50=indicators.movingAverages.sma50[indicators.movingAverages.sma50.length-1];// RSI Analysis\nif(currentRSI<30){signals.bullish.push('RSI indicates oversold conditions (RSI: '+currentRSI.toFixed(1)+')');technicalScore+=2;}else if(currentRSI>70){signals.bearish.push('RSI indicates overbought conditions (RSI: '+currentRSI.toFixed(1)+')');technicalScore-=2;}else{signals.neutral.push('RSI is in neutral territory (RSI: '+currentRSI.toFixed(1)+')');}// MACD Analysis\nif(currentMACD>currentSignal&&currentHistogram>0){signals.bullish.push('MACD is above signal line and histogram is positive');technicalScore+=1;}else if(currentMACD<currentSignal&&currentHistogram<0){signals.bearish.push('MACD is below signal line and histogram is negative');technicalScore-=1;}// Bollinger Bands Analysis\nif(currentPrice<currentBBLower){signals.bullish.push('Price is below lower Bollinger Band (potential bounce)');technicalScore+=1;}else if(currentPrice>currentBBUpper){signals.bearish.push('Price is above upper Bollinger Band (potential reversal)');technicalScore-=1;}// Moving Average Analysis\nif(currentPrice>currentSMA20&&currentSMA20>currentSMA50){signals.bullish.push('Price above 20-day SMA and 20-day SMA above 50-day SMA');technicalScore+=1;}else if(currentPrice<currentSMA20&&currentSMA20<currentSMA50){signals.bearish.push('Price below 20-day SMA and 20-day SMA below 50-day SMA');technicalScore-=1;}// Fundamental Analysis\nif(fundamentals.pe&&fundamentals.pe<15){signals.bullish.push('P/E ratio is low (P/E: '+fundamentals.pe.toFixed(1)+')');fundamentalScore+=1;}else if(fundamentals.pe&&fundamentals.pe>25){signals.bearish.push('P/E ratio is high (P/E: '+fundamentals.pe.toFixed(1)+')');fundamentalScore-=1;}if(fundamentals.pb&&fundamentals.pb<1){signals.bullish.push('P/B ratio is below 1 (P/B: '+fundamentals.pb.toFixed(2)+')');fundamentalScore+=1;}else if(fundamentals.pb&&fundamentals.pb>3){signals.bearish.push('P/B ratio is high (P/B: '+fundamentals.pb.toFixed(2)+')');fundamentalScore-=1;}if(fundamentals.peg&&fundamentals.peg<1){signals.bullish.push('PEG ratio indicates undervaluation (PEG: '+fundamentals.peg.toFixed(2)+')');fundamentalScore+=1;}else if(fundamentals.peg&&fundamentals.peg>1.5){signals.bearish.push('PEG ratio indicates overvaluation (PEG: '+fundamentals.peg.toFixed(2)+')');fundamentalScore-=1;}// Risk Analysis\nconst volatility=this.calculateVolatility(prices);if(volatility<0.15){signals.neutral.push('Low volatility indicates stable price movement');riskScore+=1;}else if(volatility>0.3){signals.bearish.push('High volatility indicates increased risk');riskScore-=1;}// Generate recommendations\nconst technical=this.createRecommendation(technicalScore,'TECHNICAL',signals);const fundamental=this.createRecommendation(fundamentalScore,'FUNDAMENTAL',signals);const risk=this.createRecommendation(riskScore,'RISK',signals);// Overall recommendation\nconst overallScore=(technicalScore+fundamentalScore+riskScore)/3;const overall=this.createRecommendation(overallScore,'OVERALL',signals,currentPrice);const summary=this.generateSummary(signals,overall);return{overall,technical,fundamental,risk,signals,summary};}static calculateVolatility(prices){const returns=[];for(let i=1;i<prices.length;i++){returns.push(Math.log(prices[i].close/prices[i-1].close));}const mean=returns.reduce((sum,ret)=>sum+ret,0)/returns.length;const variance=returns.reduce((sum,ret)=>sum+Math.pow(ret-mean,2),0)/returns.length;return Math.sqrt(variance*252);// Annualized volatility\n}static createRecommendation(score,type,signals,currentPrice){let action;let confidence;let riskLevel;let timeHorizon;if(score>=1.5){action='BUY';confidence=Math.min(90,70+score*10);}else if(score<=-1.5){action='SELL';confidence=Math.min(90,70+Math.abs(score)*10);}else{action='HOLD';confidence=50+Math.abs(score)*20;}// Determine risk level based on volatility and signals\nconst bearishCount=signals.bearish.length;const bullishCount=signals.bullish.length;if(bearishCount>bullishCount+2){riskLevel='HIGH';}else if(bullishCount>bearishCount+2){riskLevel='LOW';}else{riskLevel='MEDIUM';}// Determine time horizon\nif(type==='TECHNICAL'){timeHorizon='SHORT';}else if(type==='FUNDAMENTAL'){timeHorizon='LONG';}else{timeHorizon='MEDIUM';}// Calculate price targets\nconst priceTargets=currentPrice?{conservative:currentPrice*(1+score*0.05),moderate:currentPrice*(1+score*0.10),aggressive:currentPrice*(1+score*0.20)}:{conservative:0,moderate:0,aggressive:0};return{action,confidence:Math.round(confidence),reasoning:type==='OVERALL'?[...signals.bullish,...signals.bearish,...signals.neutral].slice(0,5):[],riskLevel,timeHorizon,priceTargets,stopLoss:currentPrice?currentPrice*0.95:0,takeProfit:currentPrice?currentPrice*1.15:0};}static generateSummary(signals,overall){const bullishCount=signals.bullish.length;const bearishCount=signals.bearish.length;const neutralCount=signals.neutral.length;if(overall.action==='BUY'){return`Strong buy recommendation with ${overall.confidence}% confidence. ${bullishCount} bullish signals vs ${bearishCount} bearish signals. Consider this a ${overall.riskLevel.toLowerCase()} risk opportunity for ${overall.timeHorizon.toLowerCase()} term investment.`;}else if(overall.action==='SELL'){return`Sell recommendation with ${overall.confidence}% confidence. ${bearishCount} bearish signals vs ${bullishCount} bullish signals. Exercise caution as this represents a ${overall.riskLevel.toLowerCase()} risk situation.`;}else{return`Hold recommendation with ${overall.confidence}% confidence. Mixed signals with ${bullishCount} bullish, ${bearishCount} bearish, and ${neutralCount} neutral indicators. Monitor for clearer directional signals.`;}}}","map":{"version":3,"names":["TechnicalAnalysis","calculateRSI","prices","period","arguments","length","undefined","Array","fill","gains","losses","i","change","close","push","Math","max","rsi","avgGain","slice","reduce","sum","gain","avgLoss","loss","rs","concat","calculateMACD","fastPeriod","slowPeriod","signalPeriod","closes","map","p","ema12","calculateEMA","ema26","macd","fast","signal","histogram","macdVal","calculateBollingerBands","stdDev","sma","calculateSMA","upper","lower","mean","price","variance","pow","standardDeviation","sqrt","middle","acc","ema","multiplier","initialSMA","newEMA","calculateVolumeMetrics","volumes","volume","volumeSMA","volumeRatio","calculateSupportResistance","window","highs","high","lows","low","support","resistance","lowWindow","highWindow","minLow","min","maxHigh","calculateAllIndicators","bollingerBands","movingAverages","sma20","sma50","supportResistance","generateRecommendations","indicators","fundamentals","currentPrice","signals","bullish","bearish","neutral","technicalScore","fundamentalScore","riskScore","currentRSI","currentMACD","currentSignal","currentHistogram","currentBBUpper","currentBBLower","currentSMA20","currentSMA50","toFixed","pe","pb","peg","volatility","calculateVolatility","technical","createRecommendation","fundamental","risk","overallScore","overall","summary","generateSummary","returns","log","ret","score","type","action","confidence","riskLevel","timeHorizon","abs","bearishCount","bullishCount","priceTargets","conservative","moderate","aggressive","round","reasoning","stopLoss","takeProfit","neutralCount","toLowerCase"],"sources":["/Users/slongo/Documents/simone_misc/stock_widget/src/TechnicalAnalysis.ts"],"sourcesContent":["// src/TechnicalAnalysis.ts\nimport { PricePoint, TechnicalIndicators, Recommendation, RecommendationAnalysis } from './types';\n\nexport class TechnicalAnalysis {\n  // RSI (Relative Strength Index)\n  static calculateRSI(prices: PricePoint[], period: number = 14): number[] {\n    if (prices.length < period + 1) {\n      return new Array(prices.length).fill(50);\n    }\n\n    const gains: number[] = [];\n    const losses: number[] = [];\n\n    // Calculate price changes\n    for (let i = 1; i < prices.length; i++) {\n      const change = prices[i].close - prices[i - 1].close;\n      gains.push(Math.max(change, 0));\n      losses.push(Math.max(-change, 0));\n    }\n\n    const rsi: number[] = [];\n    \n    // Calculate initial average gain and loss\n    let avgGain = gains.slice(0, period).reduce((sum, gain) => sum + gain, 0) / period;\n    let avgLoss = losses.slice(0, period).reduce((sum, loss) => sum + loss, 0) / period;\n\n    // Calculate RSI for the first period\n    const rs = avgGain / avgLoss;\n    rsi.push(100 - (100 / (1 + rs)));\n\n    // Calculate RSI for remaining periods using smoothing\n    for (let i = period; i < gains.length; i++) {\n      avgGain = (avgGain * (period - 1) + gains[i]) / period;\n      avgLoss = (avgLoss * (period - 1) + losses[i]) / period;\n      \n      const rs = avgGain / avgLoss;\n      rsi.push(100 - (100 / (1 + rs)));\n    }\n\n    // Pad the beginning with the first RSI value\n    return new Array(period).fill(rsi[0]).concat(rsi);\n  }\n\n  // MACD (Moving Average Convergence Divergence)\n  static calculateMACD(prices: PricePoint[], fastPeriod: number = 12, slowPeriod: number = 26, signalPeriod: number = 9) {\n    const closes = prices.map(p => p.close);\n    \n    const ema12 = this.calculateEMA(closes, fastPeriod);\n    const ema26 = this.calculateEMA(closes, slowPeriod);\n    \n    const macd = ema12.map((fast, i) => fast - ema26[i]);\n    const signal = this.calculateEMA(macd, signalPeriod);\n    const histogram = macd.map((macdVal, i) => macdVal - signal[i]);\n\n    return { macd, signal, histogram };\n  }\n\n  // Bollinger Bands\n  static calculateBollingerBands(prices: PricePoint[], period: number = 20, stdDev: number = 2) {\n    const closes = prices.map(p => p.close);\n    const sma = this.calculateSMA(closes, period);\n    \n    const upper: number[] = [];\n    const lower: number[] = [];\n\n    for (let i = 0; i < closes.length; i++) {\n      if (i < period - 1) {\n        upper.push(closes[i]);\n        lower.push(closes[i]);\n        continue;\n      }\n\n      const slice = closes.slice(i - period + 1, i + 1);\n      const mean = slice.reduce((sum, price) => sum + price, 0) / period;\n      const variance = slice.reduce((sum, price) => sum + Math.pow(price - mean, 2), 0) / period;\n      const standardDeviation = Math.sqrt(variance);\n\n      upper.push(mean + (stdDev * standardDeviation));\n      lower.push(mean - (stdDev * standardDeviation));\n    }\n\n    return { upper, middle: sma, lower };\n  }\n\n  // Moving Averages\n  static calculateSMA(prices: number[], period: number): number[] {\n    const sma: number[] = [];\n    \n    for (let i = 0; i < prices.length; i++) {\n      if (i < period - 1) {\n        sma.push(prices[i]);\n        continue;\n      }\n      \n      const sum = prices.slice(i - period + 1, i + 1).reduce((acc, price) => acc + price, 0);\n      sma.push(sum / period);\n    }\n    \n    return sma;\n  }\n\n  static calculateEMA(prices: number[], period: number): number[] {\n    const ema: number[] = [];\n    const multiplier = 2 / (period + 1);\n    \n    // Initialize with SMA\n    if (prices.length >= period) {\n      const initialSMA = prices.slice(0, period).reduce((sum, price) => sum + price, 0) / period;\n      ema.push(initialSMA);\n      \n      for (let i = 1; i < prices.length; i++) {\n        const newEMA = (prices[i] * multiplier) + (ema[i - 1] * (1 - multiplier));\n        ema.push(newEMA);\n      }\n    } else {\n      // If not enough data, use the price itself\n      return prices.map(p => p);\n    }\n    \n    return ema;\n  }\n\n  // Volume Analysis\n  static calculateVolumeMetrics(prices: PricePoint[], period: number = 20) {\n    const volumes = prices.map(p => p.volume);\n    const volumeSMA = this.calculateSMA(volumes, period);\n    \n    const volumeRatio = volumes.map((volume, i) => {\n      if (i < period - 1) return 1;\n      return volume / volumeSMA[i];\n    });\n\n    return { volumeSMA, volumeRatio };\n  }\n\n  // Support and Resistance\n  static calculateSupportResistance(prices: PricePoint[], window: number = 20) {\n    const highs = prices.map(p => p.high);\n    const lows = prices.map(p => p.low);\n    \n    const support: number[] = [];\n    const resistance: number[] = [];\n\n    for (let i = 0; i < prices.length; i++) {\n      if (i < window) {\n        support.push(lows[i]);\n        resistance.push(highs[i]);\n        continue;\n      }\n\n      const lowWindow = lows.slice(i - window, i + 1);\n      const highWindow = highs.slice(i - window, i + 1);\n      \n      const minLow = Math.min(...lowWindow);\n      const maxHigh = Math.max(...highWindow);\n      \n      support.push(minLow);\n      resistance.push(maxHigh);\n    }\n\n    return { support, resistance };\n  }\n\n  // Calculate all technical indicators\n  static calculateAllIndicators(prices: PricePoint[]): TechnicalIndicators {\n    return {\n      rsi: this.calculateRSI(prices),\n      macd: this.calculateMACD(prices),\n      bollingerBands: this.calculateBollingerBands(prices),\n      movingAverages: {\n        sma20: this.calculateSMA(prices.map(p => p.close), 20),\n        sma50: this.calculateSMA(prices.map(p => p.close), 50),\n        ema12: this.calculateEMA(prices.map(p => p.close), 12),\n        ema26: this.calculateEMA(prices.map(p => p.close), 26)\n      },\n      volume: this.calculateVolumeMetrics(prices),\n      supportResistance: this.calculateSupportResistance(prices)\n    };\n  }\n\n  // Buy/Sell Recommendation Logic\n  static generateRecommendations(\n    prices: PricePoint[], \n    indicators: TechnicalIndicators, \n    fundamentals: any,\n    currentPrice: number\n  ): RecommendationAnalysis {\n    const signals = {\n      bullish: [] as string[],\n      bearish: [] as string[],\n      neutral: [] as string[]\n    };\n\n    let technicalScore = 0;\n    let fundamentalScore = 0;\n    let riskScore = 0;\n\n    // Technical Analysis\n    const currentRSI = indicators.rsi[indicators.rsi.length - 1];\n    const currentMACD = indicators.macd.macd[indicators.macd.macd.length - 1];\n    const currentSignal = indicators.macd.signal[indicators.macd.signal.length - 1];\n    const currentHistogram = indicators.macd.histogram[indicators.macd.histogram.length - 1];\n    \n    const currentBBUpper = indicators.bollingerBands.upper[indicators.bollingerBands.upper.length - 1];\n    const currentBBLower = indicators.bollingerBands.lower[indicators.bollingerBands.lower.length - 1];\n\n    const currentSMA20 = indicators.movingAverages.sma20[indicators.movingAverages.sma20.length - 1];\n    const currentSMA50 = indicators.movingAverages.sma50[indicators.movingAverages.sma50.length - 1];\n\n    // RSI Analysis\n    if (currentRSI < 30) {\n      signals.bullish.push('RSI indicates oversold conditions (RSI: ' + currentRSI.toFixed(1) + ')');\n      technicalScore += 2;\n    } else if (currentRSI > 70) {\n      signals.bearish.push('RSI indicates overbought conditions (RSI: ' + currentRSI.toFixed(1) + ')');\n      technicalScore -= 2;\n    } else {\n      signals.neutral.push('RSI is in neutral territory (RSI: ' + currentRSI.toFixed(1) + ')');\n    }\n\n    // MACD Analysis\n    if (currentMACD > currentSignal && currentHistogram > 0) {\n      signals.bullish.push('MACD is above signal line and histogram is positive');\n      technicalScore += 1;\n    } else if (currentMACD < currentSignal && currentHistogram < 0) {\n      signals.bearish.push('MACD is below signal line and histogram is negative');\n      technicalScore -= 1;\n    }\n\n    // Bollinger Bands Analysis\n    if (currentPrice < currentBBLower) {\n      signals.bullish.push('Price is below lower Bollinger Band (potential bounce)');\n      technicalScore += 1;\n    } else if (currentPrice > currentBBUpper) {\n      signals.bearish.push('Price is above upper Bollinger Band (potential reversal)');\n      technicalScore -= 1;\n    }\n\n    // Moving Average Analysis\n    if (currentPrice > currentSMA20 && currentSMA20 > currentSMA50) {\n      signals.bullish.push('Price above 20-day SMA and 20-day SMA above 50-day SMA');\n      technicalScore += 1;\n    } else if (currentPrice < currentSMA20 && currentSMA20 < currentSMA50) {\n      signals.bearish.push('Price below 20-day SMA and 20-day SMA below 50-day SMA');\n      technicalScore -= 1;\n    }\n\n    // Fundamental Analysis\n    if (fundamentals.pe && fundamentals.pe < 15) {\n      signals.bullish.push('P/E ratio is low (P/E: ' + fundamentals.pe.toFixed(1) + ')');\n      fundamentalScore += 1;\n    } else if (fundamentals.pe && fundamentals.pe > 25) {\n      signals.bearish.push('P/E ratio is high (P/E: ' + fundamentals.pe.toFixed(1) + ')');\n      fundamentalScore -= 1;\n    }\n\n    if (fundamentals.pb && fundamentals.pb < 1) {\n      signals.bullish.push('P/B ratio is below 1 (P/B: ' + fundamentals.pb.toFixed(2) + ')');\n      fundamentalScore += 1;\n    } else if (fundamentals.pb && fundamentals.pb > 3) {\n      signals.bearish.push('P/B ratio is high (P/B: ' + fundamentals.pb.toFixed(2) + ')');\n      fundamentalScore -= 1;\n    }\n\n    if (fundamentals.peg && fundamentals.peg < 1) {\n      signals.bullish.push('PEG ratio indicates undervaluation (PEG: ' + fundamentals.peg.toFixed(2) + ')');\n      fundamentalScore += 1;\n    } else if (fundamentals.peg && fundamentals.peg > 1.5) {\n      signals.bearish.push('PEG ratio indicates overvaluation (PEG: ' + fundamentals.peg.toFixed(2) + ')');\n      fundamentalScore -= 1;\n    }\n\n    // Risk Analysis\n    const volatility = this.calculateVolatility(prices);\n    if (volatility < 0.15) {\n      signals.neutral.push('Low volatility indicates stable price movement');\n      riskScore += 1;\n    } else if (volatility > 0.3) {\n      signals.bearish.push('High volatility indicates increased risk');\n      riskScore -= 1;\n    }\n\n    // Generate recommendations\n    const technical = this.createRecommendation(technicalScore, 'TECHNICAL', signals);\n    const fundamental = this.createRecommendation(fundamentalScore, 'FUNDAMENTAL', signals);\n    const risk = this.createRecommendation(riskScore, 'RISK', signals);\n\n    // Overall recommendation\n    const overallScore = (technicalScore + fundamentalScore + riskScore) / 3;\n    const overall = this.createRecommendation(overallScore, 'OVERALL', signals, currentPrice);\n\n    const summary = this.generateSummary(signals, overall);\n\n    return {\n      overall,\n      technical,\n      fundamental,\n      risk,\n      signals,\n      summary\n    };\n  }\n\n  private static calculateVolatility(prices: PricePoint[]): number {\n    const returns = [];\n    for (let i = 1; i < prices.length; i++) {\n      returns.push(Math.log(prices[i].close / prices[i - 1].close));\n    }\n    \n    const mean = returns.reduce((sum, ret) => sum + ret, 0) / returns.length;\n    const variance = returns.reduce((sum, ret) => sum + Math.pow(ret - mean, 2), 0) / returns.length;\n    return Math.sqrt(variance * 252); // Annualized volatility\n  }\n\n  private static createRecommendation(\n    score: number, \n    type: string, \n    signals: any, \n    currentPrice?: number\n  ): Recommendation {\n    let action: 'BUY' | 'SELL' | 'HOLD';\n    let confidence: number;\n    let riskLevel: 'LOW' | 'MEDIUM' | 'HIGH';\n    let timeHorizon: 'SHORT' | 'MEDIUM' | 'LONG';\n\n    if (score >= 1.5) {\n      action = 'BUY';\n      confidence = Math.min(90, 70 + score * 10);\n    } else if (score <= -1.5) {\n      action = 'SELL';\n      confidence = Math.min(90, 70 + Math.abs(score) * 10);\n    } else {\n      action = 'HOLD';\n      confidence = 50 + Math.abs(score) * 20;\n    }\n\n    // Determine risk level based on volatility and signals\n    const bearishCount = signals.bearish.length;\n    const bullishCount = signals.bullish.length;\n    \n    if (bearishCount > bullishCount + 2) {\n      riskLevel = 'HIGH';\n    } else if (bullishCount > bearishCount + 2) {\n      riskLevel = 'LOW';\n    } else {\n      riskLevel = 'MEDIUM';\n    }\n\n    // Determine time horizon\n    if (type === 'TECHNICAL') {\n      timeHorizon = 'SHORT';\n    } else if (type === 'FUNDAMENTAL') {\n      timeHorizon = 'LONG';\n    } else {\n      timeHorizon = 'MEDIUM';\n    }\n\n    // Calculate price targets\n    const priceTargets = currentPrice ? {\n      conservative: currentPrice * (1 + (score * 0.05)),\n      moderate: currentPrice * (1 + (score * 0.10)),\n      aggressive: currentPrice * (1 + (score * 0.20))\n    } : {\n      conservative: 0,\n      moderate: 0,\n      aggressive: 0\n    };\n\n    return {\n      action,\n      confidence: Math.round(confidence),\n      reasoning: type === 'OVERALL' ? \n        [...signals.bullish, ...signals.bearish, ...signals.neutral].slice(0, 5) :\n        [],\n      riskLevel,\n      timeHorizon,\n      priceTargets,\n      stopLoss: currentPrice ? currentPrice * 0.95 : 0,\n      takeProfit: currentPrice ? currentPrice * 1.15 : 0\n    };\n  }\n\n  private static generateSummary(signals: any, overall: Recommendation): string {\n    const bullishCount = signals.bullish.length;\n    const bearishCount = signals.bearish.length;\n    const neutralCount = signals.neutral.length;\n\n    if (overall.action === 'BUY') {\n      return `Strong buy recommendation with ${overall.confidence}% confidence. ${bullishCount} bullish signals vs ${bearishCount} bearish signals. Consider this a ${overall.riskLevel.toLowerCase()} risk opportunity for ${overall.timeHorizon.toLowerCase()} term investment.`;\n    } else if (overall.action === 'SELL') {\n      return `Sell recommendation with ${overall.confidence}% confidence. ${bearishCount} bearish signals vs ${bullishCount} bullish signals. Exercise caution as this represents a ${overall.riskLevel.toLowerCase()} risk situation.`;\n    } else {\n      return `Hold recommendation with ${overall.confidence}% confidence. Mixed signals with ${bullishCount} bullish, ${bearishCount} bearish, and ${neutralCount} neutral indicators. Monitor for clearer directional signals.`;\n    }\n  }\n} "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}